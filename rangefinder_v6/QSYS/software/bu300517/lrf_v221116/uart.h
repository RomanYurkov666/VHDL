/*
 * uart.h
 *
 *  Created on: 22.11.2016
 *      Author: user
 */

#ifndef UART_H_
#define UART_H_
/*
#define MIN_MSG_LEN 4
#define RX_BUF_SIZE 64
#define SIGN 0x5B
#define PAYLOAD_LEN_MAX 32

typedef struct __attribute__((__packed__)) {
    unsigned char sign;
    unsigned char code;
    unsigned char dlen;
    unsigned char data[PAYLOAD_LEN_MAX];
} t_pc_cmd;

typedef struct
{
  unsigned char data[RX_BUF_SIZE];
  unsigned char wr_ptr;
  unsigned char rd_ptr;
  unsigned char byte_cnt;
  unsigned char buffer_full;
} t_uart_reciever;

typedef enum
{
	rec_enable = 0x0,
	driver_enable = 0x1
} rs485_driver_states;

typedef enum
{
  PCCOM_ECHO 			= 0x0,
  PCCOM_VGA  			= 0x1,
  PCCOM_TDC 			= 0x2,
  PCCOM_SAMPLE_LOADER	= 0x3,
  PCCOM_TEST_GENERATOR  = 0x4,
  PCCOM_LASER			= 0x5,
  PCCOM_ACCELEROMETER	= 0x6,
  PCCOM_STEPPER_IRIS	= 0x7,
  PCCOM_STEPPER_ATTEN	= 0x8,
  PCCOM_AMPLIFIER		= 0x9,
  PCCOM_APD_SOURCE		= 0xA,
  PCCOM_MODE_SWITCHER   = 0xB,
  PCCOM_DEVICE          = 0xDE
} t_pc_cmd_codes;

void pc_uart_init();
void pc_uart_routine();
void set_rs485_driver_dir(unsigned char dir);
unsigned char send_cmd2pc(t_pc_cmd *cmd);

*/
#endif /* UART_H_ */
